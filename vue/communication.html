<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>组件通信 | 精讲</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="Welcome">
    
    <link rel="preload" href="/study/assets/css/0.styles.13d4809e.css" as="style"><link rel="preload" href="/study/assets/js/app.979b6aca.js" as="script"><link rel="preload" href="/study/assets/js/2.3dc1b8de.js" as="script"><link rel="preload" href="/study/assets/js/1.54be531d.js" as="script"><link rel="preload" href="/study/assets/js/30.7c09ffb0.js" as="script"><link rel="prefetch" href="/study/assets/js/10.563984b0.js"><link rel="prefetch" href="/study/assets/js/11.c389195a.js"><link rel="prefetch" href="/study/assets/js/12.81539b0f.js"><link rel="prefetch" href="/study/assets/js/13.4d4410c4.js"><link rel="prefetch" href="/study/assets/js/14.37ef2a72.js"><link rel="prefetch" href="/study/assets/js/15.5542c093.js"><link rel="prefetch" href="/study/assets/js/16.d48fd1ce.js"><link rel="prefetch" href="/study/assets/js/17.bd8d538c.js"><link rel="prefetch" href="/study/assets/js/18.6d3b94c1.js"><link rel="prefetch" href="/study/assets/js/19.eb35cfee.js"><link rel="prefetch" href="/study/assets/js/20.7d8a0e52.js"><link rel="prefetch" href="/study/assets/js/21.db1b5d88.js"><link rel="prefetch" href="/study/assets/js/22.7714be7b.js"><link rel="prefetch" href="/study/assets/js/23.e4f48f95.js"><link rel="prefetch" href="/study/assets/js/24.2df53c13.js"><link rel="prefetch" href="/study/assets/js/25.1c5df345.js"><link rel="prefetch" href="/study/assets/js/26.b0217af6.js"><link rel="prefetch" href="/study/assets/js/27.4032cc92.js"><link rel="prefetch" href="/study/assets/js/28.9dc78251.js"><link rel="prefetch" href="/study/assets/js/29.511c7164.js"><link rel="prefetch" href="/study/assets/js/3.5322f14a.js"><link rel="prefetch" href="/study/assets/js/31.054ebbec.js"><link rel="prefetch" href="/study/assets/js/32.bf41a702.js"><link rel="prefetch" href="/study/assets/js/4.84e1e480.js"><link rel="prefetch" href="/study/assets/js/5.f0541060.js"><link rel="prefetch" href="/study/assets/js/6.dfb06aa0.js"><link rel="prefetch" href="/study/assets/js/7.7551a9fb.js"><link rel="prefetch" href="/study/assets/js/vendors~docsearch.5e19b665.js">
    <link rel="stylesheet" href="/study/assets/css/0.styles.13d4809e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/study/" class="home-link router-link-active"><!----> <span class="site-name">精讲</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/study/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/study/html+css/" class="nav-link">
  HTML+CSS
</a></div><div class="nav-item"><a href="/study/javascript/" class="nav-link">
  JavaScript
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue" class="dropdown-title"><span class="title">Vue</span> <span class="arrow down"></span></button> <button type="button" aria-label="Vue" class="mobile-dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study/vue/vue.html" class="nav-link">
  Vue基础
</a></li><li class="dropdown-item"><!----> <a href="/study/vue/vuePro.html" class="nav-link">
  Vue高级
</a></li><li class="dropdown-item"><!----> <a href="/study/vue/communication.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Vue组件通讯
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="源码" class="dropdown-title"><span class="title">源码</span> <span class="arrow down"></span></button> <button type="button" aria-label="源码" class="mobile-dropdown-title"><span class="title">源码</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study/sourceCode/keep-alive.html" class="nav-link">
  keep-alive
</a></li><li class="dropdown-item"><!----> <a href="/study/sourceCode/nextTick.html" class="nav-link">
  nextTick
</a></li><li class="dropdown-item"><!----> <a href="/study/sourceCode/reactive.html" class="nav-link">
  响应式原理
</a></li></ul></div></div><div class="nav-item"><a href="/study/server/" class="nav-link">
  服务端
</a></div><div class="nav-item"><a href="/study/engineering/" class="nav-link">
  工程化
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/study/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/study/html+css/" class="nav-link">
  HTML+CSS
</a></div><div class="nav-item"><a href="/study/javascript/" class="nav-link">
  JavaScript
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue" class="dropdown-title"><span class="title">Vue</span> <span class="arrow down"></span></button> <button type="button" aria-label="Vue" class="mobile-dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study/vue/vue.html" class="nav-link">
  Vue基础
</a></li><li class="dropdown-item"><!----> <a href="/study/vue/vuePro.html" class="nav-link">
  Vue高级
</a></li><li class="dropdown-item"><!----> <a href="/study/vue/communication.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Vue组件通讯
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="源码" class="dropdown-title"><span class="title">源码</span> <span class="arrow down"></span></button> <button type="button" aria-label="源码" class="mobile-dropdown-title"><span class="title">源码</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study/sourceCode/keep-alive.html" class="nav-link">
  keep-alive
</a></li><li class="dropdown-item"><!----> <a href="/study/sourceCode/nextTick.html" class="nav-link">
  nextTick
</a></li><li class="dropdown-item"><!----> <a href="/study/sourceCode/reactive.html" class="nav-link">
  响应式原理
</a></li></ul></div></div><div class="nav-item"><a href="/study/server/" class="nav-link">
  服务端
</a></div><div class="nav-item"><a href="/study/engineering/" class="nav-link">
  工程化
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>组件通信</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/study/vue/communication.html#_1-vue2-11-种" class="sidebar-link">1. vue2(11 种)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study/vue/communication.html#_1-1-props" class="sidebar-link">1.1 props</a></li><li class="sidebar-sub-header"><a href="/study/vue/communication.html#_1-2-自定义事件" class="sidebar-link">1.2 自定义事件</a></li><li class="sidebar-sub-header"><a href="/study/vue/communication.html#_1-3-全局事件总线" class="sidebar-link">1.3 全局事件总线</a></li><li class="sidebar-sub-header"><a href="/study/vue/communication.html#_1-4-消息订阅发布" class="sidebar-link">1.4 消息订阅发布</a></li><li class="sidebar-sub-header"><a href="/study/vue/communication.html#_1-5-插槽" class="sidebar-link">1.5 插槽</a></li><li class="sidebar-sub-header"><a href="/study/vue/communication.html#_1-6-vuex" class="sidebar-link">1.6 vuex</a></li><li class="sidebar-sub-header"><a href="/study/vue/communication.html#_1-7-v-model" class="sidebar-link">1.7 v-model</a></li><li class="sidebar-sub-header"><a href="/study/vue/communication.html#_1-8-sync" class="sidebar-link">1.8 .sync</a></li><li class="sidebar-sub-header"><a href="/study/vue/communication.html#_1-9-attrs-listeners" class="sidebar-link">1.9 $attrs/$listeners</a></li><li class="sidebar-sub-header"><a href="/study/vue/communication.html#_1-10-parent-children-ref" class="sidebar-link">1.10 $parent/$children/$ref</a></li><li class="sidebar-sub-header"><a href="/study/vue/communication.html#_1-11-provider-inject" class="sidebar-link">1.11 provider/inject</a></li></ul></li><li><a href="/study/vue/communication.html#_2-vue3-9-种" class="sidebar-link">2. vue3(9 种)</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="组件通信"><a href="#组件通信" class="header-anchor">#</a> 组件通信</h1> <h2 id="_1-vue2-11-种"><a href="#_1-vue2-11-种" class="header-anchor">#</a> 1. vue2(11 种)</h2> <ol><li>props</li> <li>自定义事件</li> <li>全局事件总线</li> <li>消息订阅发布</li> <li>插槽</li> <li>vuex</li> <li>v-model</li> <li>.sync</li> <li>$attrs/$listeners</li> <li>$parent/$children/$ref</li> <li>provider/inject</li></ol> <h3 id="_1-1-props"><a href="#_1-1-props" class="header-anchor">#</a> 1.1 props</h3> <ul><li><p>概念</p> <ul><li><p>props是 Vue 中最基础也是使用最多的组件间通信方式</p></li> <li><p>它用于父子之间传递数据</p></li> <li><p>如果是非函数数据，是父传子</p></li> <li><p>如果传递的是函数数据，是子传父</p></li></ul></li> <li><p>3种接收方式</p> <ul><li>数组：<code>props:['a','b']</code></li> <li>对象：<code>props:{a:Array,b:String}</code></li> <li>详细配置对象：</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">]</span>
<span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span> Array<span class="token punctuation">,</span><span class="token literal-property property">b</span><span class="token operator">:</span> String<span class="token punctuation">}</span>
<span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> Number<span class="token punctuation">,</span> <span class="token comment">// 类型</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token comment">// 普通类型默认值</span>
        <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 复杂类型默认值</span>
        <span class="token function">validator</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 校验规则</span>
            <span class="token keyword">return</span> value <span class="token operator">&gt;</span> <span class="token number">5</span> <span class="token operator">&amp;&amp;</span> value <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><ul><li>3种路由传参方式
<ul><li>布尔值：值为 true时，讲路由的 <code>params</code> 参数映射为 <code>props</code>，不能映射 <code>query</code></li> <li>对象：可以传递额外数据，类似于 <code>meta</code></li> <li>函数：可以映射任何数据到 <code>props</code> 中</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token string">&quot;helloWorld&quot;</span>
<span class="token punctuation">}</span>
<span class="token function">props</span><span class="token punctuation">(</span><span class="token parameter">route</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">a</span><span class="token operator">:</span> route<span class="token punctuation">.</span>params<span class="token punctuation">.</span>a<span class="token punctuation">,</span>
        <span class="token literal-property property">b</span><span class="token operator">:</span> route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>b<span class="token punctuation">,</span>
        <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">'zhaoliying'</span>
    <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_1-2-自定义事件"><a href="#_1-2-自定义事件" class="header-anchor">#</a> 1.2 自定义事件</h3> <ul><li>自定义事件适用于：子传父</li> <li>父组件为子组件定义事件，事件回调存放在父组件内，子组件通过回调函数传参，传递数据</li></ul> <h3 id="_1-3-全局事件总线"><a href="#_1-3-全局事件总线" class="header-anchor">#</a> 1.3 全局事件总线</h3> <ul><li>是 Vue 任意组件之间通信的方式</li> <li>全局事件总线实际上是一个对象，其必须满足以下两个条件
<ul><li>所有组件都可以获取到这个对象</li> <li>必须可以调用 <code>$on</code> 和 <code>$emit</code></li></ul></li> <li>符合条件的有两个：VM 和 VC，最总选择 VM，原因是
<ul><li>VC 太多，确定不了用哪个</li> <li>VC 可能会被销毁</li> <li>专门创建一个 VC 来作为事件总线，浪费空间</li></ul></li> <li>安装总线</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">beforeCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$bus <span class="token operator">=</span> <span class="token keyword">this</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token parameter">h</span> <span class="token operator">=&gt;</span> <span class="token function">h</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_1-4-消息订阅发布"><a href="#_1-4-消息订阅发布" class="header-anchor">#</a> 1.4 消息订阅发布</h3> <ul><li>与全局事件总线都是任意组件的通信方式</li> <li>Vue2中不使用，是因为全局事件总线可以满足需求，第三方包会增大项目体积，降低效率</li> <li>安装</li></ul> <div class="language-powershell extra-class"><pre class="language-powershell"><code>npm i pubsub-js
</code></pre></div><ul><li>使用
<ul><li>使用时不需要 <code>use</code> ，直接引入就可以使用</li> <li>回调函数的第一个参数默认为消息名，第二个参数才是传递的 <code>data</code></li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 分别在使用的组件中导入</span>
<span class="token keyword">import</span> pubsub <span class="token keyword">from</span> <span class="token string">&quot;pubsub-js&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// 在接收数据的组件 订阅</span>
pubsub<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">&quot;xxx&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">msg<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 在发送数据的组件 发布</span>
pubsub<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">&quot;xxx&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_1-5-插槽"><a href="#_1-5-插槽" class="header-anchor">#</a> 1.5 插槽</h3> <ul><li>插槽分为：<code>默认插槽</code>， <code>具名插槽</code>，<code>作用域插槽</code></li> <li>插槽可以让一个组件的功能更加强大，可以让父子之间传递解构和样式
<ul><li><code>默认插槽</code>， <code>具名插槽</code>只能父传子</li> <li><code>作用域插槽</code>可以实现父子间数据传递</li></ul></li> <li>父组件传递解构样式给子组件，子组件也可以通过 <code>作用域插槽</code>将数据回传给父组件</li></ul> <h3 id="_1-6-vuex"><a href="#_1-6-vuex" class="header-anchor">#</a> 1.6 vuex</h3> <p><a href="/study/vue/vuePro.html#_2-vuex-和-pinia-的区别">详细内容见Vue高级</a></p> <h3 id="_1-7-v-model"><a href="#_1-7-v-model" class="header-anchor">#</a> 1.7 v-model</h3> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- 父组件 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 下面这两种写法等价 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Son</span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>value<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@input</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>value=$event<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>son</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>value<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>


<span class="token comment">&lt;!-- 子组件 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>value<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@input</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$emit('input',$event.target.value)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_1-8-sync"><a href="#_1-8-sync" class="header-anchor">#</a> 1.8 .sync</h3> <ul><li>​	原理和 <code>v-model</code> 一致，只是它可以实现多个数据的双向同步，<code>v-model</code> 只能实现一个</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token comment">&lt;!-- 父组件 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 下面这两种写法等价 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Son</span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>value<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">@update:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>value = $event<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Son</span> <span class="token attr-name">:value.sync</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>value<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 子组件 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>value<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@input</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$emit('update:value',$event.target.value)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_1-9-attrs-listeners"><a href="#_1-9-attrs-listeners" class="header-anchor">#</a> 1.9 $attrs/$listeners</h3> <ul><li>$attrs：获取父组件传递的非props接收的和非样式相关的属性</li> <li>$listeners：获取父组件传递的事件监听的属性</li> <li>使用 $attrs/$listeners
<ul><li>v-bind：可以一次性把一个对象当中的属性和属性值展开进行绑定或者传递</li> <li>v-on：可以一次性把一个对象当中的事件监听进行展开绑定</li></ul></li></ul> <h3 id="_1-10-parent-children-ref"><a href="#_1-10-parent-children-ref" class="header-anchor">#</a> 1.10 $parent/$children/$ref</h3> <ul><li>$parent：获取父组件对象（不推荐）</li> <li>$children：获取子组件对象组成的数组（不推荐）</li> <li>$ref：
<ul><li><code>ref</code> 用在 html 标签身上，通过 <code>this.$refs.xxx</code> 可以获取到真实dom元素</li> <li><code>ref</code> 用在组件标签身上，通过 <code>this.$refs.xxx</code> 可以获取到组件对象</li></ul></li> <li>注意
<ul><li>组件复用时，可能会有多个父组件，<code>$parent</code> 无法获取指定的父组件</li> <li><code>$children</code> 获取子组件时，数组顺序不确定，因此不推荐</li> <li>只有对所有的子组件对象同样的操作，我们才会使用<code>$children</code></li></ul></li></ul> <h3 id="_1-11-provider-inject"><a href="#_1-11-provider-inject" class="header-anchor">#</a> 1.11 provider/inject</h3> <ul><li><p><code>provider</code> 选项应该是一个对象或返回一个对象的函数</p></li> <li><p><code>inject</code> 选项应该是</p> <ul><li>一个字符串数组</li> <li>一个对象，这个对象的 <code>value</code> 是注入的数据名， <code>key</code> 可以将这个数据重命名</li></ul></li> <li><p>不推荐使用，因为数据源不明确</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 在祖先组件</span>
<span class="token literal-property property">provide</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">aa</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token literal-property property">bb</span><span class="token operator">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span>

<span class="token comment">// 在子代组件接收</span>
<span class="token literal-property property">injuct</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'aa'</span><span class="token punctuation">,</span><span class="token string">'bb'</span><span class="token punctuation">]</span>
<span class="token literal-property property">inject</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">xxx</span><span class="token operator">:</span> <span class="token string">'aa'</span> <span class="token comment">// 将 aa 重命名为 xxx</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_2-vue3-9-种"><a href="#_2-vue3-9-种" class="header-anchor">#</a> 2. vue3(9 种)</h2> <ol><li>移除全局事件总线</li> <li>.sync 合并到 v-model</li> <li>$listeners 合并到 $attrs</li> <li>去除 $children</li></ol></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/study/assets/js/app.979b6aca.js" defer></script><script src="/study/assets/js/2.3dc1b8de.js" defer></script><script src="/study/assets/js/1.54be531d.js" defer></script><script src="/study/assets/js/30.7c09ffb0.js" defer></script>
  </body>
</html>
