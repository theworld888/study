<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>工程化 | 精讲</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="Welcome">
    
    <link rel="preload" href="/study/assets/css/0.styles.13d4809e.css" as="style"><link rel="preload" href="/study/assets/js/app.979b6aca.js" as="script"><link rel="preload" href="/study/assets/js/2.3dc1b8de.js" as="script"><link rel="preload" href="/study/assets/js/1.54be531d.js" as="script"><link rel="preload" href="/study/assets/js/23.e4f48f95.js" as="script"><link rel="prefetch" href="/study/assets/js/10.563984b0.js"><link rel="prefetch" href="/study/assets/js/11.c389195a.js"><link rel="prefetch" href="/study/assets/js/12.81539b0f.js"><link rel="prefetch" href="/study/assets/js/13.4d4410c4.js"><link rel="prefetch" href="/study/assets/js/14.37ef2a72.js"><link rel="prefetch" href="/study/assets/js/15.5542c093.js"><link rel="prefetch" href="/study/assets/js/16.d48fd1ce.js"><link rel="prefetch" href="/study/assets/js/17.bd8d538c.js"><link rel="prefetch" href="/study/assets/js/18.6d3b94c1.js"><link rel="prefetch" href="/study/assets/js/19.eb35cfee.js"><link rel="prefetch" href="/study/assets/js/20.7d8a0e52.js"><link rel="prefetch" href="/study/assets/js/21.db1b5d88.js"><link rel="prefetch" href="/study/assets/js/22.7714be7b.js"><link rel="prefetch" href="/study/assets/js/24.2df53c13.js"><link rel="prefetch" href="/study/assets/js/25.1c5df345.js"><link rel="prefetch" href="/study/assets/js/26.b0217af6.js"><link rel="prefetch" href="/study/assets/js/27.4032cc92.js"><link rel="prefetch" href="/study/assets/js/28.9dc78251.js"><link rel="prefetch" href="/study/assets/js/29.511c7164.js"><link rel="prefetch" href="/study/assets/js/3.5322f14a.js"><link rel="prefetch" href="/study/assets/js/30.7c09ffb0.js"><link rel="prefetch" href="/study/assets/js/31.054ebbec.js"><link rel="prefetch" href="/study/assets/js/32.bf41a702.js"><link rel="prefetch" href="/study/assets/js/4.84e1e480.js"><link rel="prefetch" href="/study/assets/js/5.f0541060.js"><link rel="prefetch" href="/study/assets/js/6.dfb06aa0.js"><link rel="prefetch" href="/study/assets/js/7.7551a9fb.js"><link rel="prefetch" href="/study/assets/js/vendors~docsearch.5e19b665.js">
    <link rel="stylesheet" href="/study/assets/css/0.styles.13d4809e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/study/" class="home-link router-link-active"><!----> <span class="site-name">精讲</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/study/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/study/html+css/" class="nav-link">
  HTML+CSS
</a></div><div class="nav-item"><a href="/study/javascript/" class="nav-link">
  JavaScript
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue" class="dropdown-title"><span class="title">Vue</span> <span class="arrow down"></span></button> <button type="button" aria-label="Vue" class="mobile-dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study/vue/vue.html" class="nav-link">
  Vue基础
</a></li><li class="dropdown-item"><!----> <a href="/study/vue/vuePro.html" class="nav-link">
  Vue高级
</a></li><li class="dropdown-item"><!----> <a href="/study/vue/communication.html" class="nav-link">
  Vue组件通讯
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="源码" class="dropdown-title"><span class="title">源码</span> <span class="arrow down"></span></button> <button type="button" aria-label="源码" class="mobile-dropdown-title"><span class="title">源码</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study/sourceCode/keep-alive.html" class="nav-link">
  keep-alive
</a></li><li class="dropdown-item"><!----> <a href="/study/sourceCode/nextTick.html" class="nav-link">
  nextTick
</a></li><li class="dropdown-item"><!----> <a href="/study/sourceCode/reactive.html" class="nav-link">
  响应式原理
</a></li></ul></div></div><div class="nav-item"><a href="/study/server/" class="nav-link">
  服务端
</a></div><div class="nav-item"><a href="/study/engineering/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  工程化
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/study/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/study/html+css/" class="nav-link">
  HTML+CSS
</a></div><div class="nav-item"><a href="/study/javascript/" class="nav-link">
  JavaScript
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue" class="dropdown-title"><span class="title">Vue</span> <span class="arrow down"></span></button> <button type="button" aria-label="Vue" class="mobile-dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study/vue/vue.html" class="nav-link">
  Vue基础
</a></li><li class="dropdown-item"><!----> <a href="/study/vue/vuePro.html" class="nav-link">
  Vue高级
</a></li><li class="dropdown-item"><!----> <a href="/study/vue/communication.html" class="nav-link">
  Vue组件通讯
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="源码" class="dropdown-title"><span class="title">源码</span> <span class="arrow down"></span></button> <button type="button" aria-label="源码" class="mobile-dropdown-title"><span class="title">源码</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/study/sourceCode/keep-alive.html" class="nav-link">
  keep-alive
</a></li><li class="dropdown-item"><!----> <a href="/study/sourceCode/nextTick.html" class="nav-link">
  nextTick
</a></li><li class="dropdown-item"><!----> <a href="/study/sourceCode/reactive.html" class="nav-link">
  响应式原理
</a></li></ul></div></div><div class="nav-item"><a href="/study/server/" class="nav-link">
  服务端
</a></div><div class="nav-item"><a href="/study/engineering/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  工程化
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>工程化</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/study/engineering/#_1-谈谈-bable" class="sidebar-link">1. 谈谈 bable</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/study/engineering/#_2-讲讲-eslint" class="sidebar-link">2. 讲讲 ESLint</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study/engineering/#_2-1-配置" class="sidebar-link">2.1 配置</a></li></ul></li><li><a href="/study/engineering/#_3-git-flow" class="sidebar-link">3. Git Flow</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study/engineering/#_3-1-git-分支" class="sidebar-link">3.1 git 分支</a></li><li class="sidebar-sub-header"><a href="/study/engineering/#_3-2-提交注释-commit-规范" class="sidebar-link">3.2 提交注释 commit 规范</a></li><li class="sidebar-sub-header"><a href="/study/engineering/#_3-3-其他规范" class="sidebar-link">3.3 其他规范</a></li></ul></li><li><a href="/study/engineering/#_4-谈谈-webpack" class="sidebar-link">4. 谈谈 Webpack</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study/engineering/#_4-1-5-个核心概念" class="sidebar-link">4.1 5 个核心概念</a></li><li class="sidebar-sub-header"><a href="/study/engineering/#_4-2-常见-loader" class="sidebar-link">4.2 常见 Loader</a></li><li class="sidebar-sub-header"><a href="/study/engineering/#_4-3-常见的-plugin" class="sidebar-link">4.3 常见的 Plugin</a></li></ul></li><li><a href="/study/engineering/#_5-谈谈-webpack-优化" class="sidebar-link">5. 谈谈 Webpack 优化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/study/engineering/#_1-提升开发体验" class="sidebar-link">1. 提升开发体验</a></li><li class="sidebar-sub-header"><a href="/study/engineering/#_2-提升-webpack-提升打包构建速度" class="sidebar-link">2. 提升 webpack 提升打包构建速度</a></li><li class="sidebar-sub-header"><a href="/study/engineering/#_3-减少代码体积" class="sidebar-link">3. 减少代码体积</a></li><li class="sidebar-sub-header"><a href="/study/engineering/#_4-优化代码运行性能" class="sidebar-link">4. 优化代码运行性能</a></li></ul></li><li><a href="/study/engineering/#_6-vite-和-webpack-的区别" class="sidebar-link">6. Vite 和 Webpack 的区别</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/study/engineering/#webpack-流程" class="sidebar-link">webpack 流程</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="工程化"><a href="#工程化" class="header-anchor">#</a> 工程化</h1> <h2 id="_1-谈谈-bable"><a href="#_1-谈谈-bable" class="header-anchor">#</a> 1. 谈谈 bable</h2> <p><code>是什么</code>：JavaScript 编译器，将 ES6+的语法转化为浏览器兼容性高的低版本 JavaScript</p> <p><code>配置方式</code>：</p> <ol><li><code>babel.config.*</code></li> <li><code>.babelrc.*</code></li> <li><code>package.json</code> 中 <code>babel</code></li></ol> <p><code>配置</code>：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string-property property">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">,</span>	<span class="token comment">// 预设包</span>
  <span class="token string-property property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span>  <span class="token comment">// babel 的插件</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><code>preset</code>: 预设包实际上就是一些插件组成的集合，因为插件数量很多，为了方便开发者使用，官方预设了一些常用的插件，使得可以处理一些 <code>ES6+</code> 的一些简单语法，但是比较复杂的语法，就无法使用基础的插件来转化</li></ul> <blockquote><p>core-js: 补丁和按需加载</p></blockquote> <h2 id="_2-讲讲-eslint"><a href="#_2-讲讲-eslint" class="header-anchor">#</a> 2. 讲讲 ESLint</h2> <p><code>概念</code>：是一个代码审查和修复的工具，其核心是通过配置一个个规则来限制代码的合法性和风格</p> <p><code>配置方式</code>：</p> <ul><li><code>eslintrc.*</code>: <code>eslintrc.js</code> <code>eslintrc.json</code> 等</li> <li><code>package.json</code> 中 <code>eslintConfig</code></li> <li><code>eslint.config.js</code></li></ul> <h3 id="_2-1-配置"><a href="#_2-1-配置" class="header-anchor">#</a> 2.1 配置</h3> <h2 id="_3-git-flow"><a href="#_3-git-flow" class="header-anchor">#</a> 3. Git Flow</h2> <p><code>概念</code>：Git Flow 就是一套标准化的 Git 开发流程</p> <h3 id="_3-1-git-分支"><a href="#_3-1-git-分支" class="header-anchor">#</a> 3.1 git 分支</h3> <ul><li>master：长期分支，一般用于管理对外发布版本，每个 <code>commit</code>对应一个发布版本</li> <li>develop：长期分支，一般用于日常开发的汇总，即开发版本代码</li> <li>feature：短期分支，功能分支</li> <li>hotfix：短期分支，一般用于修复正式版出现的 bug</li> <li>release：短期分支，一般用于正式版本发布之前（即合并到 master 分支之前），对预发布版本进行测试</li></ul> <h3 id="_3-2-提交注释-commit-规范"><a href="#_3-2-提交注释-commit-规范" class="header-anchor">#</a> 3.2 提交注释 commit 规范</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 功能分支</span>
git commit <span class="token operator">-</span>m <span class="token string">&quot;feat: xxxxxx&quot;</span>

<span class="token comment">// 修复 bug</span>
git commit <span class="token operator">-</span>m <span class="token string">&quot;fix: 新增用户出现NPE&quot;</span>

<span class="token comment">// 优化已有功能</span>
git commit <span class="token operator">-</span>m <span class="token string">&quot;imp: 用户管理密码加密存储&quot;</span>

<span class="token comment">// 重构功能</span>
git commit <span class="token operator">-</span>m <span class="token string">&quot;refactor:用户管理&quot;</span>

<span class="token number">1.</span> test：添加测试

<span class="token number">2.</span> docs：撰写文档（documentation）

<span class="token number">3.</span> style： 调整格式（不影响代码运行的变动）

<span class="token number">4.</span> build：修改构建相关内容，如npm、maven内容。

<span class="token number">5.</span> <span class="token function">ci：修改持续集成相关内容</span><span class="token punctuation">(</span>Continues Intergration<span class="token punctuation">)</span>
</code></pre></div><h3 id="_3-3-其他规范"><a href="#_3-3-其他规范" class="header-anchor">#</a> 3.3 其他规范</h3> <ol><li><p>规范一</p> <ul><li>一次 <code>COMMIT</code> 只做一件事</li></ul></li> <li><p>规范二</p> <hr></li> <li><p>规范三</p> <ul><li>master 为稳定分支，进入此分支的代码都需要 review</li> <li>develop 分支为即将发布的开发版本，一旦开发完成，转到 release 分支进行最后的完善和 bug 修复</li></ul></li> <li><p>规范四</p> <ul><li><code>hotfix</code>和 <code>feature</code>分支开发完成后需要 <code>merge</code>到 <code>develop</code>分支，都需要在 GitLab 提交 <code>Merge Request</code>进行<code>Code Review</code></li> <li>release 分支，需 merge 到 master 分支时，也需在 Gitlab 中提交 Merge Requst，进行 Code Review</li> <li>首先由各组组长 Code Review，再由负责人 Code Review。</li></ul></li></ol> <h2 id="_4-谈谈-webpack"><a href="#_4-谈谈-webpack" class="header-anchor">#</a> 4. 谈谈 Webpack</h2> <p><code>概念</code>：静态模块打包工具，可以将静态模块编译、打包和输出成一个或多个文件（bundles）。</p> <h3 id="_4-1-5-个核心概念"><a href="#_4-1-5-个核心概念" class="header-anchor">#</a> 4.1 5 个核心概念</h3> <ul><li><strong>入口(entry)</strong>: 指示 webpack 从哪个文件开始打包。</li> <li><strong>输出(output)</strong>: 指定打包后将文件输出到哪里去。</li> <li><strong>加载器(loader)</strong>: webpack 默认只能识别 js、json 文件，其他类型的文件需要通过 loader 转化成有效模块才能识别。</li> <li><strong>插件(plugin)</strong>: 相对 loader，plugin 可以做范围更广的工作，比如：打包优化，资源管理，注入环境变量。</li> <li><strong>模式(mode)</strong>: 可以选择 development, production 或 none 之中的一个。不同模式会加载不同的配置。</li></ul> <h3 id="_4-2-常见-loader"><a href="#_4-2-常见-loader" class="header-anchor">#</a> 4.2 常见 Loader</h3> <ol><li>处理样式资源</li></ol> <ul><li><code>style-loader</code> 动态创建一个 Style 标签，里面放置 Webpack 中 CSS 模块内容</li> <li><code>css-loader</code> 负责将 CSS 文件编译成 Webpack 能识别的模块</li> <li><code>less-loader</code> 将 Less 文件编译成 CSS 文件</li> <li><code>sass-loader</code> 将 Sass 文件编译成 CSS 文件</li> <li><code>stylus-loader</code> 将 Stylus 文件编译成 CSS 文件</li> <li><code>postcss-loader</code> 根据要求增加 CSS 的前缀(css 代码兼容性处理)</li></ul> <ol start="2"><li>处理 js 资源</li></ol> <ul><li><code>babel-loader</code> 将 ES6 转化为 ES5(js 代码兼容性处理)</li> <li><code>eslint-loader</code> 过去用来进行 js 代码语法检查，最新 Webpack5 改用插件实现：eslint-webpack-plugin</li></ul> <ol start="3"><li>加载其他资源</li></ol> <ul><li><code>file-loader</code> 过去用来转化图片、字体图标等资源，现在 Webpack5 内置了</li> <li><code>url-loader</code> 过去用来转化图片等资源，现在 Webpack5 内置了</li> <li><code>vue-loader</code> 用来编译 Vue 单文件组件</li></ul> <h3 id="_4-3-常见的-plugin"><a href="#_4-3-常见的-plugin" class="header-anchor">#</a> 4.3 常见的 Plugin</h3> <ol><li><code>html-webpack-plugin</code> 简化创建 HTML 文件</li> <li><code>eslint-webpack-plugin</code> 用来进行 js 代码语法检查</li> <li><code>terser-webpack-plugin</code> 压缩 js 代码</li> <li><code>mini-css-extract-plugin</code> 提取 CSS 成单独文件</li> <li><code>css-minimizer-webpack-plugin</code> 压缩 CSS 代码</li></ol> <h2 id="_5-谈谈-webpack-优化"><a href="#_5-谈谈-webpack-优化" class="header-anchor">#</a> 5. 谈谈 Webpack 优化</h2> <h3 id="_1-提升开发体验"><a href="#_1-提升开发体验" class="header-anchor">#</a> 1. 提升开发体验</h3> <ul><li>使用 <code>Source Map</code> 让开发或上线时代码报错能有更加准确的错误提示。</li> <li>在生产阶段我们可以配置不生成 map 文件减小打包的体积</li></ul> <h3 id="_2-提升-webpack-提升打包构建速度"><a href="#_2-提升-webpack-提升打包构建速度" class="header-anchor">#</a> 2. 提升 webpack 提升打包构建速度</h3> <ul><li>使用 <code>HotModuleReplacement</code> 让开发时只重新编译打包更新变化了的代码，不变的代码使用缓存，从而使更新速度更快。</li> <li>使用 <code>OneOf</code> 让资源文件一旦被某个 loader 处理了，就不会继续遍历了，打包速度更快。</li> <li>使用 <code>Include/Exclude</code> 排除或只检测某些文件，处理的文件更少，速度更快。</li> <li>使用 <code>Cache</code> 对 eslint 和 babel 处理的结果进行缓存，让第二次打包速度更快。</li> <li>使用 <code>Thead</code> 多进程处理 eslint 和 babel 任务，速度更快。（需要注意的是，进程启动通信都有开销的，要在比较多代码处理时使用才有效果）</li></ul> <h3 id="_3-减少代码体积"><a href="#_3-减少代码体积" class="header-anchor">#</a> 3. 减少代码体积</h3> <ul><li>使用 <code>Tree Shaking</code> 剔除了没有使用的多余代码，让代码体积更小。</li> <li>使用 <code>@babel/plugin-transform-runtime</code> 插件对 babel 进行处理，让辅助代码从中引入，而不是每个文件都生成辅助代码，从而体积更小。</li> <li>使用 <code>Image Minimizer</code> 对项目中图片进行压缩，体积更小，请求速度更快。（需要注意的是，如果项目中图片都是在线链接，那么就不需要了。本地项目静态图片才需要进行压缩。）</li></ul> <h3 id="_4-优化代码运行性能"><a href="#_4-优化代码运行性能" class="header-anchor">#</a> 4. 优化代码运行性能</h3> <ul><li>使用 <code>Code Split</code> 对代码进行分割成多个 js 文件，从而使单个文件体积更小，并行加载 js 速度更快。并通过 import 动态导入语法进行按需加载，从而达到需要使用时才加载该资源，不用时不加载资源。</li> <li>使用 <code>Preload / Prefetch</code> 对代码进行提前加载，等未来需要使用时就能直接使用，从而用户体验更好。</li> <li>使用 <code>Network Cache</code> 能对输出资源文件进行更好的命名，将来好做缓存，从而用户体验更好。</li> <li>使用 <code>Core-js</code> 对 js 进行兼容性处理，让我们代码能运行在低版本浏览器。</li> <li>使用 <code>PWA</code> 能让代码离线也能访问，从而提升用户体验。</li></ul> <h2 id="_6-vite-和-webpack-的区别"><a href="#_6-vite-和-webpack-的区别" class="header-anchor">#</a> 6. Vite 和 Webpack 的区别</h2> <ol><li>底层语言不同</li></ol> <p>从底层原理上来说，Vite 是基于 esbuild 预构建依赖。而 esbuild 是采用 go 语言编写，因为 go 语言的操作是纳秒级别。而 js 是以毫秒计数，所以 vite 比用 js 编写的打包器快 10-100 倍。</p> <ol start="2"><li>启动方式不同</li></ol> <p>webpack: 分析依赖=&gt; 编译打包=&gt; 交给本地服务器进行渲染。首先分析各个模块之间的依赖，然后进行打包。这样的坏处就是随着模块的增多，需要处理的依赖关系，需要打包的模块越来越多，造成热更新越来越慢</p> <p>vite: 启动服务器=&gt; 请求模块时按需动态编译显示。vite 采用了一种懒加载的方式，它在启动的时候不需要打包，所以不用分析模块与模块之间的依赖关系，不用进行编译；当浏览器请求某个模块时，再根据需要对模块内容进行编译这样做的好处就是按需动态编译可以缩减编译时间，当项目越复杂，模块越多的情况下，vite 明显优于 webpack.</p> <ol start="3"><li>缺点比较</li></ol> <ul><li>vite 生态不及 webpack，加载器、插件不够丰富</li> <li>打包到生产环境时，vite 使用传统的 rollup 进行打包，生产环境 esbuild 构建对于 css 和代码分割不够友好。所以，vite 的优势是体现在开发阶段</li> <li>vite 首屏性能不及 webpack
<ul><li>Webpack：浏览器发起请求，服务端将已经打包构建好的首屏内容发送给浏览器。整个过程非常普遍，没有什么可说的，不存在什么性能问题</li> <li>Vite 在首屏方面的表现就有些差了。由于 unbundle 机制，首屏期间需要额外做以下工作:
<ul><li>不对源文件做合并捆绑操作，导致大量的 http 请求；</li> <li>dev server 运行期间对源文件做 resolve、load、transform、parse 操作；</li> <li>预构建、二次预构建操作也会阻塞首屏请求，直到预构建完成为止</li></ul></li></ul></li></ul> <h2 id="webpack-流程"><a href="#webpack-流程" class="header-anchor">#</a> webpack 流程</h2> <ol><li>html-webpack-plugin：打包 js 和 HTML 模板</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;html-webpack-plugin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&quot;./src/main.js&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;dist&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&quot;[name][contenthash:8].js&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&quot;production&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">&quot;./index.html&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ol start="2"><li>打包 css</li></ol> <p><code>导入样式时可以使用 CommonJS也可以使用 ES6</code></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// require('../styles/index.css')</span>
<span class="token keyword">import</span> <span class="token string">&quot;../styles/index.css&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;打包&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 配置打包 css</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">module</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.css$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
                <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;style-loader&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ol start="3"><li></li></ol></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/study/assets/js/app.979b6aca.js" defer></script><script src="/study/assets/js/2.3dc1b8de.js" defer></script><script src="/study/assets/js/1.54be531d.js" defer></script><script src="/study/assets/js/23.e4f48f95.js" defer></script>
  </body>
</html>
